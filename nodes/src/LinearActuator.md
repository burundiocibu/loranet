# Linear Actuator State Variables


pos: >0, 0, <0

pcnt
last_pcnt
last_pcnt_micros


motor_speed: <0, 0, >0
limit: 0, 1
target: >0, 0
err = target_position - current_position: <0, 0, >0

current state                        | output
speed | limit | target | err  | speed | target | pos
<0         0       >0     >0   |  err      -       -
<0         0       >0      0   |    0      -       -
<0         0       >0     <0   |  err      -       -
<0         0        0     >0   |  -64      -       -
<0         0        0      0   |  -64      -       -
<0         0        0     <0   |  err      -       -
<0         0       <0     >0   |  -64      -       -
<0         0       <0      0   |  -64      -       -
<0         0       <0     <0   |  err      -       -

<0         1       >0     >0   |  err      -       -
<0         1       >0      0   |    0      0       0
<0         1       >0     <0   |    0      0       0
<0         1        0     >0   |    0      0       0
<0         1        0      0   |    0      0       0
<0         1        0     <0   |    0      0       0
<0         1       <0     >0   |    0      0       0
<0         1       <0      0   |    0      0       0
<0         1       <0     <0   |    0      0       0

0         0       >0     >0   |  err      -       -
0         0       >0      0   |    0      -       -
0         0       >0     <0   |  err      -       -
0         0        0     >0   |  err      -       -
0         0        0      0   |  -64      -       -
0         0        0     <0   |  -64      -       -
0         0       <0     >0   |  -64      -       -
0         0       <0      0   |  -64      -       -
0         0       <0     <0   |  err      -       -

0         1       >0     >0   |  err      -       -
0         1       >0      0   |    0      0       0
0         1       >0     <0   |    0      0       0
0         1        0     >0   |    0      0       0
0         1        0      0   |    0      0       0
0         1        0     <0   |    0      0       0
0         1       <0     >0   |    0      0       0
0         1       <0      0   |    0      0       0
0         1       <0     <0   |    0      0       0

>0         0       >0     >0   |  err      -       -
>0         0       >0      0   |  err      -       -
>0         0       >0     <0   |  err      -       -
>0         0        0     >0   |  -64      -       -
>0         0        0      0   |  -64      -       -
>0         0        0     <0   |  err      -       -
>0         0       <0     >0   |  -64      -       -
>0         0       <0      0   |  -64      -       -
>0         0       <0     <0   |  err      -       -

>0         1       >0     >0   |  err      -       -
>0         1       >0      0   |    0      -       -
>0         1       >0     <0   |    0      0       0
>0         1        0     >0   |    0      0       0
>0         1        0      0   |    0      0       0
>0         1        0     <0   |    0      0       0
>0         1       <0     >0   |    0      0       0
>0         1       <0      0   |    0      0       0
>0         1       <0     <0   |    0      0       0

=====================================================


b0=speed==0
b1=speed>0




if (limit)
{
  if ( tp > 0 && err > 0)
  {
0         1       >0     >0   |  err      -       -
<0        1       >0     >0   |  err      -       -
>0        1       >0     >0   |  err      -       -
  }
  else if (tp > 0 && err == 0)
  {
>0        1       >0      0   |    0      -       -
  }
  else
  {
<0        1       >0      0   |    0      0       0
<0        1       >0     <0   |    0      0       0
<0        1        0     >0   |    0      0       0
<0        1        0      0   |    0      0       0
<0        1        0     <0   |    0      0       0
<0        1       <0     >0   |    0      0       0
<0        1       <0      0   |    0      0       0
<0        1       <0     <0   |    0      0       0
0         1       >0      0   |    0      0       0
0         1       >0     <0   |    0      0       0
0         1        0     >0   |    0      0       0
0         1        0      0   |    0      0       0
0         1        0     <0   |    0      0       0
0         1       <0     >0   |    0      0       0
0         1       <0      0   |    0      0       0
0         1       <0     <0   |    0      0       0
>0        1       >0     <0   |    0      0       0
>0        1        0     >0   |    0      0       0
>0        1        0      0   |    0      0       0
>0        1        0     <0   |    0      0       0
>0        1       <0     >0   |    0      0       0
>0        1       <0      0   |    0      0       0
>0        1       <0     <0   |    0      0       0
  }
}
else (limit==0)
{
  if (tp>0)

<0        0       >0     >0   |  err      -       -
<0        0       >0      0   |  err      -       -
<0        0       >0     <0   |  err      -       -
0         0       >0     >0   |  err      -       -
0         0       >0      0   |  err      -       -
0         0       >0     <0   |  err      -       -
>0        0       >0     >0   |  err      -       -
>0        0       >0      0   |  err      -       -
>0        0       >0     <0   |  err      -       -
  else if (tp == 0)
  {
    if ((speed < 0  && err < 0) ||
        (speed == 0 && err > 0) ||
        (speed > 0  && err < 0)
    {
<0        0        0     <0   |  err      -       -
0         0        0     >0   |  err      -       -
>0        0        0     <0   |  err      -       -
    }
    else
    {
<0        0        0     >0   |  -64      -       -
<0        0        0      0   |  -64      -       -
0         0        0      0   |  -64      -       -
0         0        0     <0   |  -64      -       -
>0        0        0     >0   |  -64      -       -
>0        0        0      0   |  -64      -       -
    }
  }
  else
  {
    if (err < 0)
    {
>0        0       <0     <0   |  err      -       -
<0        0       <0     <0   |  err      -       -
0         0       <0     <0   |  err      -       -
    }
    else
    {
<0        0       <0     >0   |  -64      -       -
<0        0       <0      0   |  -64      -       -
0         0       <0     >0   |  -64      -       -
0         0       <0      0   |  -64      -       -
>0        0       <0     >0   |  -64      -       -
>0        0       <0      0   |  -64      -       -
    }
  }
}